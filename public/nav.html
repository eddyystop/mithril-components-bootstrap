<!doctype html>
<head>
  <link href="../../public/vendor/bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css">
<style>
  body {
    padding-top: 70px;
    padding-bottom: 70px;
  }
</style>
</head>
<body>
<script src="../../public/vendor/js/mithril.js"></script>
<script src="../../components/utils/mcUtils.js"></script>
<script src="../componentsUi/Tabs/Tabs.js"></script>
<script src="../componentsUi/NavSearch/NavSearch.js"></script>
<script src="../componentsUi/NavText/NavText.js"></script>
<script src="../componentsUi/Button/Button.js"></script>
<script src="../componentsUi/Nav/NavResponsive.js"></script>
<script>
  var app = {
    controller: function () {
      this.activeTab = m.prop('finance');
      this.tabsCtrl = new mc.Tabs.controller({
        activeTab: this.activeTab,
        onclickTab: function (tabName) {
          console.log('app tabs tabName=', tabName);
        }.bind(this)
      });

      this.searchValue = m.prop('search this');
      this.navSearchCtrl = new mc.NavSearch.controller({
        searchValue: this.searchValue,
        onsubmit: function (searchValue) {
          console.log('app NavSearch searchValue=', searchValue)
        }.bind(this)
      });

      this.buttonCtrl = new mc.Button.controller({
        onclick: function () {
          console.log('\nbutton clicked');
        }
      });

      this.btnDropdownCtrl = new mc.ButtonDropdown.controller({
        onclickTab: function (tabName) {
          console.log('\n.....Button dropdown clicked. tabName=', tabName);
        }.bind(this)
      });

      this.navCtrl = new mc.NavResponsive.controller();
    },

    view: function (ctrl) {
      return [
        mc.NavResponsive.view(ctrl.navCtrl, {
          flavor: 'fixed-top',
          brandLabel: 'Acom',
          brandUrl: '/acom',
          viewContents: function () {
            return [
              viewTabs(),
              //viewSearch(),
              //mc.NavText.view({}, {flavor: 'nav', label: 'Signed in as', href: '#', linkLabel: 'JohnSz'})
              mc.Button.view(ctrl.buttonCtrl, {
                  flavor: 'nav-right', label: 'Sign in',
                  selectors: '.btn-warning.btn-sm'
                }
              )
            ]
          }
        }),
        m('h1', 'line1'),
        m('h1', 'line2'),
        viewBtn(),
        m('h1', 'line3'),
        m('h1', 'line4'),
        m('h1', 'line5'),
        m('h1', 'line6')
      ];

      function viewTabs () {
        var tabOptions = {
          flavor: 'nav',
          tabs: [
            { name: 'finance', label: 'Financials' },
            { name: 'foo', label: 'Disabled', isDisabled: true },
            { name: 'staff', label: 'Personnel' },
            { name: 'dropdown', label: 'Dropdown', dropdown: [
              {label: 'Primary actions', type: 'header' },
              {name: 'action1', label: 'Action'},
              {name: 'action2', label: 'Another action', isDisabled: true },
              {type: 'divider' },
              {label: 'Secondary actions', type: 'header' },
              {name: 'action9', label: 'Separated action' },
              {label: 'Exit bar', redirectTo: '/bar'}
            ]},
            { name: 'exit', label: 'Exit /foo', redirectTo:  '/foo' },
            { name: 'exit2', label: 'Exit /bar', redirectTo:  '/bar', isDisabled: true }
          ]
        };

        return mc.Tabs.view(ctrl.tabsCtrl, tabOptions)
      }

      function viewSearch () {
        var options = {
          flavor: 'nav-right',
          label: 'Search',
          placeholder: 'Search',
          btnLabel: 'Submit'
        };

        return mc.NavSearch.view(ctrl.navSearchCtrl, options);
      }

      function viewBtn () {
        var dropdownOptions = {
          flavor: 'btn-up',
          name: 'dropdown1',
          label: 'Dropdown-1',
          selectors: '.btn-success.btn-lg',
          isSplit: true,
          dropdown: [
            {label: 'Primary actions', type: 'header' },
            {name: 'action1', label: 'Action'},
            {name: 'action2', label: 'Another action', isDisabled: true },
            {type: 'divider' },
            {label: 'Secondary actions', type: 'header' },
            {name: 'action9', label: 'Separated action' },
            {label: 'Exit bar', redirectTo: '/bar'}
          ]
        };

        return mc.ButtonDropdown.view(ctrl.btnDropdownCtrl, dropdownOptions);
      }
    }
  };

  m.module(document.body, app);
</script>
</body>